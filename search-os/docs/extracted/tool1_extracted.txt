=== P√°gina 1 ===
üìò
S E A R C H  O S  ( T o o l  1 )
V ersi√≥n:  2. 1 ÓÇÅDefinitiv a)
R ol:  Disco v er y Engine ÓÇÅAnalist a Sect or ial Aut omatizado )
St ack Cor e:  Py thon, Google Gemini 1. 5 Pr o API, T a vil y API.
1 .  V I S I √ì N  Y  A L C A N C E
El objetiv o es construir una aplic aci√≥n w eb de "Copilot o de In v ersi√≥n "  que  
aut omatice las F ases 0 , 1 y 2 del pr oceso de b√∫squeda de un Se ar ch F und.
La her ramient a no es un simple chat. Es un flujo de tr ab ajo estructur ado  que:
ÓÅ≤ÓÇî R ecibe una ide a de in v ersi√≥n ÓÇÅSect or).
ÓÅ≥ÓÇî In v estiga aut √≥nomament e en int er net (usando Agent es).
ÓÅ¥ÓÇî Genera un An√°lisis Sect or ial Det allado  ÓÇÅMar k do wn) en tiempo r e al.
ÓÅµÓÇî P er mit e la it eraci√≥n y r efinamient o mediant e una int er f az de P ant alla Dividida  
ÓÇÅSplit -Scr een) .
R estr icci√≥n Cr √≠tic a ÓÇÅThe Har d Constr aint):
El sist ema debe operar b ajo la T esis de In v ersi√≥n de Emer it a  (har dcoded),  
r echazando o penalizando sect or es que no cumplan con m√©tr ic as de EBITD A,  
fragment aci√≥n o digit alizaci√≥n.
2 .  A R Q U I T E C T U R A  D E L  S I S T E M A
2 . 1  S t a c k  T e c n o l √≥ g i c o  R e c o m e n d a d o
F r ont end:  Str e amlit ÓÇÅLa y out s t . c o l u m n s ( [ 1 ,  2 ÓÇÑ ÓÇÇ ) p ara el MVP .
Back end / Or quest ador:  Py thon 3 . 10ÓÇù.
SEARCH OS ÓÇÅT ool 1ÓÇÇ
1

=== P√°gina 2 ===
Int eligencia Ar tif icial ÓÇÅCer ebr o ):  g o o g l e - g e n e r a t i v e - a i  ÓÇÅModelo: g e m i n i - 1 . 5 - p r o - l a t e s t ).  
Se elige por su v ent ana de cont e x t o ÓÇÅ2M t ok ens) y c ap acidad de  
raz onamient o.
B√∫squeda Ex t er na ÓÇÅDat os):  t a v i l y - p y t h o n . Mot or de b√∫squeda optimizado p ara  
RA G ÓÇÅR etr ie v al- Augment ed Generation).
2 . 2  D i a g r a m a  d e  F l u j o  d e  D a t o s
F ragment o de c√≥digo
ÓÇÉ U s u a r i o ]  ÓÇà ÓÇà ( I n p u t  S e c t o r ) ‚ü∂  [ O r q u e s t a d o r  P y t h o n ]
      |                              |
      |                        ÓÇÉ A g e n t e  C l a s i f i c a d o r  ÓÇÅ C N A E ÓÇÇ ÓÇÑ
      |                              |
      |                        ÓÇÉ A g e n t e  I n v e s t i g a d o r  ÓÇÅ T a v i l y ) ]  Óáì ( I n t e r n e t )
      |                              |
      |                        ÓÇÉ A g e n t e  A n a l i s t a  ÓÇÅ G e m i n i ) ]  Óáì ( T e s i s  E m e r i t a )
      |                              |
      v                              v
ÓÇÉ U I  I z q u i e r d a :  C h a t ]  ü°ê ‚ü∂  [ S E S S I O N  S T A T E  ÓÇÅ J S O N ÓÇÇ ÓÇÑ  Óáî Óáò  ÓÇÉ U I  D e r e c h a :  M a r k d o w n ]
3 .  D E F I N I C I √ì N  F U N C I O N A L :  U I / U X  ( P A N T A L L A  
D I V I D I D A )
La int er f az se divide estr ict ament e en dos columnas v er tic ales.
3 . 1  P a n e l  I z q u i e r d o  ( 3 0 - 4 0 % ) :  E l  C e n t r o  d e  M a n d o
Est e p anel es din√°mico y tiene dos est ados l√≥gicos:
Est ado AÓÇí Conf igur aci√≥n ÓÇÅInput Inicial )
Campo T e x t o:  "Nombr e del Sect or / Nicho " ( ej. Mant enimient o de  
Ascensor es ).
Campo T e x t o ÓÇÅOpcional ):  "Cont e x t o Adicional" ( ej. Centr arse en  
mant enimient o, no inst alaci√≥n ).
Bot √≥n CT AÓÇí  " ARRANC AR AN√ÅLISIS" .
Est ado BÓÇí Copilot o Int er activ o ÓÇÅChat)
Se activ a tras la generaci√≥n del pr imer bor rador .
Hist or ial de Chat:  Muestra la con v ersaci√≥n.
SEARCH OS ÓÇÅT ool 1ÓÇÇ
2

=== P√°gina 3 ===
Input de Chat:  P er mit e al usuar io dar √≥r denes de r efinamient o.
Cap acidades:
Consul t a ÓÇÅRA GÓÇÇÓÇí  "¬øQu√© mar gen EBITD A mencionas en la secci√≥n 2?" .
Mut aci√≥n ÓÇÅEdit):  "La secci√≥n de Compet encia est √° incomplet a, a√±ade a  
Indra y r eescr √≠bela" .
3 . 2  P a n e l  D e r e c h o  ( 6 0 - 7 0 % ) :  E l  L i e n z o  ( C a n v a s )
Visor de Document o:  R ender iza el cont enido en Mar k do wn limpio.
Estructur a Modular:  El document o no es un bloque de t e x t o √∫nico.  
Int er nament e es un objet o JSON, lo que per mit e actualizar secciones  
espec√≠fic as independient ement e.
F eedb ack Visual:  Si el usuar io pide un c ambio en la Secci√≥n 3 , solo esa  
secci√≥n muestra un spinner de " Actualizando... " mientras el r est o per manece  
est √°tico.
4 .  L √ì G I C A  D E  N E G O C I O :  E L  P I P E L I N E  D E  A G E N T E S
El b ack end debe ejecut ar est a secuencia l√≥gic a ÓÇÅF ases 0ÓÇà 2ÓÇÇ.
P a s o  1 :  M a p p i n g  y  C l a s i f i c a c i √≥ n
A cci√≥n:  El LLM consul t a su b ase de conocimient o int er na p ara mape ar el  
sect or a c√≥digos industr iales CNAE 2009  ÓÇÅEsp a√±a).
Output:  C√≥digo pr imar io y secundar ios ÓÇÅEj. CNAE 4322 ÓÇà F ont aner √≠a ).
P a s o  2 :  I n v e s t i g a c i √≥ n  P r o f u n d a  ( M a r k e t  R e s e a r c h )
A cci√≥n:  Generaci√≥n de quer ies de b√∫squeda v√≠a T a vil y .
Objetiv os de B√∫squeda ÓÇÅHar dcoded ):
ÓÅ≤ÓÇî T ama√±o:  "T ama√±o mer c ado ÓÇÉSect or] Esp a√±a 202 4 f acturaci√≥n" .
ÓÅ≥ÓÇî F r agment aci√≥n:  "Cuot a de mer c ado l√≠der es ÓÇÉSect or] Esp a√±a" ÓÇÅAler t a si T op  
3 ÓÇò 50%ÓÇÇ.
ÓÅ¥ÓÇî R ent abilidad:  "M√°r genes EBITD A sect or ÓÇÉSect or] Esp a√±a" .
SEARCH OS ÓÇÅT ool 1ÓÇÇ
3

=== P√°gina 4 ===
ÓÅµÓÇî T endencias:  "Nor mativ a y Riesgos ÓÇÉSect or] Esp a√±a" .
P a s o  3 :  A n √° l i s i s  F i n a n c i e r o  ( I n f e r e n c i a )
R eglas de T esis ÓÇÅFil tr os):
Mar gen EBITD A objetiv o: ÓÇò15% .
Mar gen Brut o objetiv o: ÓÇò40% .
Con v ersi√≥n Caja: ÓÇò7 0% .
Not a:  Si los dat os encontrados indic an m√°r genes b ajos, el sist ema debe  
mar c ar lo como "ROJO" o " √ÅMBAR" en el r epor t e final.
P a s o  4 :  G e n e r a c i √≥ n  y  E s t r u c t u r a c i √≥ n
El LLM r edact a el inf or me siguiendo estr ict ament e la plantilla JSON definida en la  
Secci√≥n 5 .
5 .  M O D E L O  D E  D A T O S  Y  P L A N T I L L A
El est ado de la aplic aci√≥n ( S e s s i o n S t a t e ) debe mant ener est a estructura JSON p ara  
el document o. Est o es fundament al p ara que la UI funcione por m√≥dulos.
JSON
{
  " m e t a " :  {
    " s e c t o r _ n a m e " :  " L o g √≠ s t i c a  d e  F r √≠ o " ,
    " c n a e _ c o d e s " :  [ " 5 2 1 0 " ] ,
    " v e r d i c t " :  " √Å M B A R " ,
    " t i m e s t a m p " :  " 2 0 2 5 ÓÇà 0 1 ÓÇà 0 8 "
  } ,
  " s e c t i o n s " :  {
    " 1 _ e x e c u t i v e _ s u m m a r y " :  {  " t i t l e " :  " 1 .  R e s u m e n  E j e c u t i v o  y  S e m √° f o r o " ,  " c o n t e n t " :  " . . . "  } ,
    " 2 _ f i n a n c i a l s " :  {  " t i t l e " :  " 2 .  U n i t  E c o n o m i c s  y  F i n a n c i e r o s " ,  " c o n t e n t " :  " . . . "  } ,
    " 3 _ m a r k e t _ s i z e " :  {  " t i t l e " :  " 3 .  T a m a √± o  y  S e g m e n t a c i √≥ n " ,  " c o n t e n t " :  " . . . "  } ,
    " 4 _ v a l u e _ c h a i n " :  {  " t i t l e " :  " 4 .  C a d e n a  d e  V a l o r " ,  " c o n t e n t " :  " . . . "  } ,
    " 5 _ c o m p e t i t i o n " :  {  " t i t l e " :  " 5 .  E s t r u c t u r a  C o m p e t i t i v a " ,  " c o n t e n t " :  " . . . "  } ,
    " 6 _ r e g u l a t i o n s " :  {  " t i t l e " :  " 6 .  R e g u l a c i √≥ n  y  R i e s g o s " ,  " c o n t e n t " :  " . . . "  } ,
    " 7 _ o p p o r t u n i t i e s " :  {  " t i t l e " :  " 7 .  O p o r t u n i d a d e s  ÓÇÅ T e s i s  E m e r i t a ) " ,  " c o n t e n t " :  " . . . "  } ,
    " 8 _ g t m _ t a r g e t s " :  {  " t i t l e " :  " 8 .  H i p √≥ t e s i s  y  T a r g e t s " ,  " c o n t e n t " :  " . . . "  } ,
    " 9 _ c o n c l u s i o n " :  {  " t i t l e " :  " 9 .  C o n c l u s i √≥ n  E s t r u c t u r a d a " ,  " c o n t e n t " :  " . . . "  } ,
    " 1 0 _ s o u r c i n g _ s i g n a l s " :  {  " t i t l e " :  " 1 0 .  S e √± a l e s  d e  B √∫ s q u e d a " ,  " c o n t e n t " :  " . . . "  }
  }
}
 √ì √ì √ì
SEARCH OS ÓÇÅT ool 1ÓÇÇ
4

=== P√°gina 5 ===
6 .  L √ì G I C A  D E  I N T E R A C C I √ì N  ( C H A T  &  E D I C I √ì N )
Est a secci√≥n define c√≥mo funciona el Panel Iz quier do ÓÇÅChat).
6 . 1  P r o m p t  d e l  S i s t e m a  p a r a  e l  C h a t
El LLM del chat debe t ener acceso a her ramient as ( f u n c t i o n  c a l l i n g ) p ara manipular el  
JSON del est ado.
Py thon
S Y S T E M _ P R O M P T _ C H A T  ÓÇõ  " " "
E r e s  e l  C o p i l o t o  d e  I n v e r s i √≥ n  d e  E m e r i t a .
T i e n e s  a c c e s o  d e  l e c t u r a / e s c r i t u r a  a l  d o c u m e n t o  d e  a n √° l i s i s  q u e  e l  u s u a r i o  v e  a  s u  d e r e c h a .
T U S  H E R R A M I E N T A S  ÓÇÅ T O O L S ÓÇÇ ÓÇí
1 .  ` r e a d _ f u l l _ d o c u m e n t ( ) ` ÓÇí  L e e  e l  c o n t e n i d o  a c t u a l .
2 .  ` s e a r c h _ i n t e r n e t ( q u e r y ) ` ÓÇí  U s a  T a v i l y  p a r a  b u s c a r  d a t o s  f r e s c o s .
3 .  ` u p d a t e _ s e c t i o n ( s e c t i o n _ k e y ,  u s e r _ i n s t r u c t i o n ) ` ÓÇí  L l a m a  a  u n  s u b - a g e n t e  p a r a  r e e s c r i b i r  U N A  s e c c i √≥ n  e s p e c √≠ f i c a .
R E G L A S  D E  C O M P O R T A M I E N T O ÓÇí
ÓÇà  S i  e l  u s u a r i o  p i d e  u n  c a m b i o  ( " A √± a d e  e s t o " ,  " C o r r i g e  e s t o " ) ,  U S A  ` u p d a t e _ s e c t i o n ` .  N O  r e s p o n d a s  s o l o  c o n  t e x t o .
ÓÇà  S i  e l  u s u a r i o  p r e g u n t a  ( " ¬ø Q u √©  s i g n i f i c a  e s t o ? " ) ,  r e s p o n d e  c o n v e r s a c i o n a l m e n t e .
ÓÇà  M a n t √© n  s i e m p r e  e l  r i g o r  d e l  M a n i f i e s t o  E m e r i t a  ÓÇÅ E B I T D A  ÓÇò 1 5 % ,  B 2 B ,  E s p a √± a ) .
" " "
6 . 2  F u n c i √≥ n  d e  A c t u a l i z a c i √≥ n  ( u p d a t e _ s e c t i o n )
L√≥gic a:
ÓÅ≤ÓÇî R ecibir:  s e c t i o n _ k e y  ( ej. '6 _ r egulations') y i n s t r u c t i o n  ( ej. " A√±ade imp act o de  
nor mativ a NIS2").
ÓÅ≥ÓÇî Leer:  Obt ener el c o n t e n t  actual de esa secci√≥n.
ÓÅ¥ÓÇî Gener ar:  LLM r eescr ibe solo  esa secci√≥n int egrando la nue v a instrucci√≥n y  
dat os.
ÓÅµÓÇî Guar dar:  Actualizar el JSON del est ado.
ÓÅ∂ÓÇî R efr esc ar:  La UI der echa det ect a el c ambio en el JSON y r e-r ender iza solo  
ese bloque.
7 .  I N P U T S  D E  S I S T E M A  ( H A R D C O D E D  T H E S I S )
SEARCH OS ÓÇÅT ool 1ÓÇÇ
5

=== P√°gina 6 ===
Para asegurar la c alidad "Emer it a" , est as const ant es deben in y ect arse en c ada  
llamada al LLM (t ant o en la generaci√≥n inicial como en el chat).
V ar iables de T esis ÓÇÅSe ar ch F und DNAÓÇÇÓÇí
T ARGET _ GEOÓÇí  "Esp a√±a ÓÇÅPr ior it ar io ), Eur op a Occident al ÓÇÅSecundar io )" .
T ARGET _SIZEÓÇí  "V ent as 5ÓÇà40M‚Ç¨, EBITD A 1ÓÇà5M‚Ç¨" .
T ARGET _ MARGINSÓÇí  "EBITD A ÓÇòÓÇõ 15%, Brut o ÓÇòÓÇõ 40%" .
DEAL_ KILLERSÓÇí  "Riesgo t ecnol√≥gico al t o, Dependencia de un solo client e,  
Sect or en decliv e, M√°r genes muy b ajos ÓÇÅÓÇó10%ÓÇÇ" .
V ALUE_ LEVERS ÓÇÅP alanc as):  "Digit alizaci√≥n (p asar de p apel a sof t war e ),  
Pr of esionalizaci√≥n comer cial ÓÇÅOutbound), Eficiencia operativ a" .
8 .  D E T A L L E  D E  I M P L E M E N T A C I √ì N  ( H A N D O F F  D E V )
8 . 1  P r o m p t  M a e s t r o  ( A n √° l i s i s  I n i c i a l )
Est e pr ompt genera el JSON inicial en la F ase 4 del pipeline.
Py thon
I N I T I A L _ S Y S T E M _ P R O M P T  ÓÇõ  f " " "
E R E S  E L  C I O  ÓÇÅ D I R E C T O R  D E  I N V E R S I O N E S ÓÇÇ  D E  ' E M E R I T A ' ,  U N  S E A R C H  F U N D  D E  √â L I T E .
ÓÇÖ E M E R I T A _ T H E S I S _ C O N S T R A I N T S ÓÇÜ
T U  T A R E A ÓÇí
A n a l i z a r  l o s  d a t o s  p r o p o r c i o n a d o s  y  g e n e r a r  u n  I N F O R M E  S E C T O R I A L  P R E L I M I N A R .
T u  t o n o  d e b e  s e r  e s c √© p t i c o ,  p r o f e s i o n a l  y  b a s a d o  e n  d a t o s .  D e b e s  j u z g a r ,  n o  s o l o  d e s c r i b i r .
E S T R U C T U R A  D E  R E S P U E S T A  ÓÇÅ J S O N  O B L I G A T O R I O ÓÇÇ ÓÇí
D e b e s  d e v o l v e r  u n  J S O N  v √° l i d o  d o n d e  l a s  c l a v e s  s e a n  e x a c t a m e n t e :
" 1 _ e x e c u t i v e _ s u m m a r y " ,  " 2 _ f i n a n c i a l s " ,  " 3 _ m a r k e t _ s i z e " ,  " 4 _ v a l u e _ c h a i n " ,  
" 5 _ c o m p e t i t i o n " ,  " 6 _ r e g u l a t i o n s " ,  " 7 _ o p p o r t u n i t i e s " ,  " 8 _ g t m _ t a r g e t s " ,  
" 9 _ c o n c l u s i o n " ,  " 1 0 _ s o u r c i n g _ s i g n a l s " .
C O N T E N I D O  P O R  S E C C I √ì N ÓÇí
1 .  S U M M A R Y ÓÇí  V e r e d i c t o  f i n a l  ÓÇÅ V E R D E / √Å M B A R / R O J O ÓÇÇ  j u s t i f i c a d o .
2 .  F I N A N C I A L S ÓÇí  E s t r u c t u r a  d e  c o s t e s ,  m √° r g e n e s  r e a l e s  v s  t e s i s ,  c i c l o  d e  c a j a .
. . .  ÓÇÅ R e s t o  d e  s e c c i o n e s  s e g √∫ n  e s p e c i f i c a c i √≥ n )  . . .
1 0 .  S O U R C I N G ÓÇí  Q u √©  b u s c a r  e n  G o o g l e / L i n k e d I n  p a r a  e n c o n t r a r  a l  t a r g e t  ÓÇÅ S e √± a l e s ) .
I N S T R U C C I O N E S  C L A V E ÓÇí
ÓÇà  S i  e l  m a r g e n  e s  ÓÇó 1 5 % ,  e l  s e m √° f o r o  d e b e  s e r  R O J O  o  √Å M B A R .
ÓÇà  P r i o r i z a  d a t o s  d e  E s p a √± a .
SEARCH OS ÓÇÅT ool 1ÓÇÇ
6

=== P√°gina 7 ===
ÓÇà  F o r m a t o  d e l  c o n t e n i d o  d e n t r o  d e l  J S O N ÓÇí  M a r k d o w n .
" " "
P R O M P T  M A E S T R O :  G E N E R A D O R  D E  A N √Å L I S I S  I N I C I A L  ( F a s e  1 )
I N I T I A L _ A N A L Y S I S _ S Y S T E M _ P R O M P T  ÓÇõ  " " "
E R E S  E L  D I R E C T O R  D E  I N V E R S I O N E S  ÓÇÅ C I O ÓÇÇ  D E  ' E M E R I T A ' ,  U N  S E A R C H  F U N D  D E  √â L I T E  E N  E S P A √ë A .
T U  M I S I √ì N ÓÇí
T u  o b j e t i v o  n o  e s  s o l o  i n f o r m a r ,  s i n o  J U Z G A R .  D e b e s  r e d a c t a r  u n  A n √° l i s i s  S e c t o r i a l  P r e l i m i n a r
b a s a d o  e n  l o s  d a t o s  q u e  t e  p r o p o r c i o n o ,  d e t e r m i n a n d o  s i  e l  s e c t o r  e s  a p t o  p a r a  a d q u i r i r  u n a  P Y M E .
1 .  E L  A D N  D E  E M E R I T A  ( C R I T E R I O S  I N N E G A B L E S )
D e b e s  e v a l u a r  e l  s e c t o r  u s a n d o  E S T R I C T A M E N T E  e s t o s  f i l t r o s .  S i  e l  s e c t o r  f a l l a  e n  a l g u n o ,
d e b e s  d e s t a c a r l o  c o m o  u n  R I E S G O  C R √ç T I C O  ÓÇÅ R e d  F l a g ) .
T A M A √ë O  T A R G E T ÓÇí  B u s c a m o s  n i c h o s  d o n d e  e x i s t a n  e m p r e s a s  f a c t u r a n d o  5 ÓÇà 4 0 M ‚Ç¨  c o n  E B I T D A  1 ÓÇà 5 M ‚Ç¨ .
R E N T A B I L I D A D ÓÇí  M a r g e n  B r u t o  ÓÇò 4 0 %  y  M a r g e n  E B I T D A  ÓÇò 1 5 %  ÓÇÅ E s e n c i a l ) .
M O D E L O ÓÇí  B 2 B ,  i n g r e s o s  r e c u r r e n t e s ,  b a j o  r i e s g o  t e c n o l √≥ g i c o  ( e v i t a r  s t a r t u p s / d i s r u p c i √≥ n ) .
C A J A ÓÇí  N e g o c i o s  " A s s e t  L i g h t " .  C a p e x  b a j o  ÓÇÅ ÓÇó 5 %  v e n t a s ) .  C o n v e r s i √≥ n  d e  c a j a  ÓÇò 7 0 % .
D I N √Å M I C A ÓÇí  S e c t o r e s  f r a g m e n t a d o s  ( s i n  u n  l √≠ d e r  c o n  ÓÇò 2 0 %  c u o t a )  y  p o c o  d i g i t a l i z a d o s .
2 .  I N S T R U C C I O N E S  D E  R E D A C C I √ì N
T o n o :  P r o f e s i o n a l ,  e s c √© p t i c o ,  d i r e c t o .  E v i t a  a d j e t i v o s  v a c √≠ o s  ( " i n t e r e s a n t e " ,  " b u e n o " ) .  U s a  d a t o s .
F o r m a t o :  M a r k d o w n  e s t r i c t o .  U s a  n e g r i t a s  p a r a  c i f r a s  c l a v e .
I d i o m a :  E s p a √± o l  d e  N e g o c i o s  ÓÇÅ E s p a √± a ) .
3 .  E S T R U C T U R A  D E L  I N F O R M E  ( O B L I G A T O R I A )
D e b e s  g e n e r a r  u n  J S O N  c o n  l a s  s i g u i e n t e s  s e c c i o n e s .  N O  o m i t a s  n i n g u n a .
ÓÅ≤ÓÇî R E S U M E N  E J E C U T I V O  Y  S E M √Å F O R O ÓÇí  *  C o n c l u s i √≥ n  d i r e c t a .
V E R E D I C T O ÓÇí  ÓÇÉ V E R D E  /  √Å M B A R  /  R O J O ÓÇÑ .  J u s t i f i c a  e l  c o l o r  b a s √° n d o t e  e n  m √° r g e n e s  y  f r a g m e n t a c i √≥ n .
ÓÅ≥ÓÇî U N I T  E C O N O M I C S  Y  F I N A N C I E R O S ÓÇí  *  ¬ø C √≥ m o  g a n a  d i n e r o  u n a  e m p r e s a  a q u √≠ ?  D e s g l o s e  d e  c o s t e s  t √≠ p i c o s .
M √° r g e n e s  m e d i o s  o b s e r v a d o s  ÓÇÅ B r u t o  y  E B I T D A ÓÇÇ .
C i c l o  d e  c a j a  ÓÇÅ ¬ø Q u i √© n  f i n a n c i a  a  q u i √© n ? ÓÇÇ .
ÓÅ¥ÓÇî T A M A √ë O  Y  S E G M E N T A C I √ì N ÓÇí
E s t i m a c i √≥ n  T A M / S A M  e n  E s p a √± a .  T e n d e n c i a  ÓÇÅ C A G R ÓÇÇ .
SEARCH OS ÓÇÅT ool 1ÓÇÇ
7

=== P√°gina 8 ===
S e g m e n t o s  m √° s  a t r a c t i v o s  p a r a  u n  S e a r c h  F u n d .
ÓÅµÓÇî C A D E N A  D E  V A L O R ÓÇí
D i a g r a m a  t e x t u a l  ÓÇÅ P r o v e e d o r  Óáó  F a b r i c a n t e  Óáó  D i s t r i b u i d o r  Óáó  C l i e n t e ) .
¬ø Q u i √© n  t i e n e  l a  s a r t √© n  p o r  e l  m a n g o  ( p o d e r  d e  n e g o c i a c i √≥ n ) ?
ÓÅ∂ÓÇî E S T R U C T U R A  C O M P E T I T I V A ÓÇí
G r a d o  d e  c o n c e n t r a c i √≥ n .
M e n c i o n a  n o m b r e s  d e  c o m p e t i d o r e s  r e a l e s  e n c o n t r a d o s  e n  e l  c o n t e x t o .
B u s c a  e l  " A r q u e t i p o  I d e a l " ÓÇí  E m p r e s a  f a m i l i a r ,  2 0 ÓÇù  a √± o s  h i s t o r i a ,  d u e √± o s  ÓÇò 6 0  a √± o s .
ÓÅ∑ÓÇî R E G U L A C I √ì N  Y  R I E S G O S ÓÇí
B a r r e r a s  d e  e n t r a d a  r e a l e s .  N o r m a t i v a s  c r √≠ t i c a s  ( e j .  I S O s ,  M a r c a d o  C E ÓÇÇ .
D e a l  K i l l e r s  ÓÇÅ R i e s g o s  q u e  h a r √≠ a n  c a n c e l a r  l a  o p e r a c i √≥ n ) .
ÓÅ∏ÓÇî O P O R T U N I D A D E S  ÓÇÅ P A L A N C A S  D E  V A L O R ÓÇÇ ÓÇí
¬ø D √≥ n d e  e s t √°  l a  i n e f i c i e n c i a ?  ÓÇÅ E j .  P r o c e s o s  e n  p a p e l ,  s i n  e q u i p o  c o m e r c i a l ) .
¬ø C √≥ m o  p u e d e  E m e r i t a  m u l t i p l i c a r  e l  E B I T D A ?
ÓÅπÓÇî H I P √ì T E S I S  Y  T A R G E T S ÓÇí
P e r f i l  d e  l a  e m p r e s a  i d e a l  a  b u s c a r .
L i s t a  d e  3 ÓÇà 5  e m p r e s a s  r e a l e s  i d e n t i f i c a d a s  e n  l a  b √∫ s q u e d a  ( s i  l a s  h a y ) .
ÓÅ∫ÓÇî S E √ë A L E S  D E  B √ö S Q U E D A  ÓÇÅ S O U R C I N G  S I G N A L S ÓÇÇ ÓÇí
I n s t r u c c i o n e s  p a r a  e l  a n a l i s t a  j u n i o r / s c r a p p e r .
E j :  " B u s c a r  e m p r e s a s  c o n  w e b s  C o p y r i g h t  2 0 1 5 " ,  " B u s c a r  e n  a s o c i a c i o n e s  d e  i n s t a l a d o r e s " .
4 .  I N P U T  D E  D A T O S  ( C O N T E X T O )
U t i l i z a  E X C L U S I V A M E N T E  l a  s i g u i e n t e  i n f o r m a c i √≥ n  r e c o p i l a d a  p o r  e l  A g e n t e  d e  I n v e s t i g a c i √≥ n .
S i  f a l t a  u n  d a t o  c r √≠ t i c o ,  i n d √≠ c a l o  c o m o  " D A T O  N O  D I S P O N I B L E  ÓÇà  R E Q U I E R E  E N T R E V I S T A  E X P E R T A " ,  n o  t e  l o  i n v e n t e s .
ÓÇÉ A Q U √ç  S E  I N Y E C T A R √Å N  L O S  R E S U L T A D O S  D E  T A V I L Y / G O O G L E ÓÇÑ
" " "
8 . 2  S n i p p e t  d e  L √≥ g i c a  d e  E d i c i √≥ n
Est e c√≥digo maneja la solicitud de edici√≥n del usuar io desde el chat.
SEARCH OS ÓÇÅT ool 1ÓÇÇ
8

=== P√°gina 9 ===
Py thon
d e f  u p d a t e _ s e c t i o n _ l o g i c ( c u r r e n t _ d o c ,  s e c t i o n _ i d ,  u s e r _ p r o m p t ) :
    #  1 .  C o n t e x t o  a c t u a l
    o l d _ c o n t e n t  =  c u r r e n t _ d o c [ ' s e c t i o n s ' ] [ s e c t i o n _ i d ] [ ' c o n t e n t ' ]
    
    #  2 .  D e c i s i √≥ n  d e  b √∫ s q u e d a  ÓÇÅ A g e n t e  l i g e r o )
    #  ÓÇÅ O m i t i d o  p o r  b r e v e d a d :  a q u √≠  i r √≠ a  l √≥ g i c a  c h e c k _ i f _ s e a r c h _ n e e d e d )
    
    #  3 .  R e e s c r i b i r  ÓÇÅ A g e n t e  E d i t o r )
    p r o m p t  =  f " " "
    A C T √ö A  C O M O  U N  E D I T O R  S E N I O R  D E  P R I V A T E  E Q U I T Y .
    T A R E A ÓÇí  A c t u a l i z a r  l a  s e c c i √≥ n  ' { s e c t i o n _ i d } '  d e l  i n f o r m e .
    
    C O N T E N I D O  O R I G I N A L ÓÇí
    { o l d _ c o n t e n t }
    
    I N S T R U C C I √ì N  D E L  U S U A R I O ÓÇí
    " { u s e r _ p r o m p t } "
    
    R E G L A ÓÇí  D e v u e l v e  l a  s e c c i √≥ n  c o m p l e t a  r e e s c r i t a  e n  M a r k d o w n .  M a n t √© n  e l  t o n o  p r o f e s i o n a l .
    " " "
    
    n e w _ c o n t e n t  =  g e m i n i _ m o d e l . g e n e r a t e _ c o n t e n t ( p r o m p t ) . t e x t
    r e t u r n  n e w _ c o n t e n t
def generat e_ initial_ r epor t(sect or_ name, se ar ch_dat a_cont e x t):
"""
Genera el pr imer bor rador del an√°lisis complet o.
"""
# 1. Pr ep arar el Pr ompt final in y ect ando los dat os
final_ pr ompt = f"""
SECT OR A ANALIZARÓÇí {sect or_ name }
D A T OS DE INVESTIG A CI√ìN ÓÇÅCONTEX T OÓÇÇÓÇí
{se ar ch_dat a_cont e x t}
Genera el inf or me complet o siguiendo la estructura JSON definida en las instr
ucciones del sist ema.
"""
# 2. Llamada al Modelo ÓÇÅGemini 1. 5 Pr o )
r esponse = model.generat e_cont ent(
SEARCH OS ÓÇÅT ool 1ÓÇÇ
9

=== P√°gina 10 ===
    cont ent s=final_ pr ompt,
    syst em_ instruction=INITIAL_ANAL YSIS_SYSTEM_ PROMPT , # Óáî A QU√ç V
A EL PROMPT MAESTRO
    generation_config={
        "t emperatur e "ÓÇí 0 . 3 , # Baja t emperatura p ara ser f actual y r igur oso
        "r esponse_ mime_t ype ": "applic ation/json" # F orzamos JSON p ara f acilit a
r el p arsing en la UI
    }
)
r etur n r esponse.t e x t
9 .  E N T R E G A B L E S  F I N A L E S  ( O U T P U T S )
ÓÅ≤ÓÇî Document o Mar k do wn (.md ):  Desc ar gable, f or mat e ado p ara Notion.
ÓÅ≥ÓÇî JSON Estructur ado:  Para aliment ar futuras her ramient as del SEARCH OS  
( como el Scrapper de t ar get s).
ÓÅ¥ÓÇî Sem√°f or o de In v ersi√≥n:  Un v er edict o clar o al final del r epor t e:
üî¥  ROJOÓÇí  Desc ar t ar ÓÇÅDe al K illers encontrados).
üü°  √ÅMBARÓÇí  Dudoso ÓÇÅR equier e hablar con e xper t os).
üü¢  VERDEÓÇí  A v anzar a F ase 3 ÓÇÅAn√°lisis Det allado / Sour cing).
1 0 .  L √ì G I C A  D E  I M P L E M E N T A C I √ì N  D E L  P I P E L I N E
P a s o  1 :  I n v e s t i g a c i √≥ n  ( T a v i l y )
El sist ema no debe busc ar a ciegas. Debe usar est as quer ies  b ase p ara c ada  
sect or:
Py thon
d e f  g e t _ r e s e a r c h _ q u e r i e s ( s e c t o r ) :
    r e t u r n  [
        f " T a m a √± o  m e r c a d o  { s e c t o r }  E s p a √± a  2 0 2 4  f a c t u r a c i √≥ n " ,
SEARCH OS ÓÇÅT ool 1ÓÇÇ
10

=== P√°gina 11 ===
        f " M √° r g e n e s  E B I T D A  s e c t o r  { s e c t o r }  E s p a √± a " ,
        f " P r i n c i p a l e s  e m p r e s a s  { s e c t o r }  E s p a √± a  c u o t a  m e r c a d o " ,
        f " A s o c i a c i √≥ n  n a c i o n a l  e m p r e s a s  { s e c t o r }  E s p a √± a " ,
        f " N o r m a t i v a  y  r e g u l a c i √≥ n  { s e c t o r }  E s p a √± a  r i e s g o s " ,
        f " T e n d e n c i a s  M & A  { s e c t o r }  E u r o p a  2 0 2 4 "
    ]
P a s o  2 :  G e n e r a c i √≥ n  d e l  B o r r a d o r
Py thon
d e f  g e n e r a t e _ i n i t i a l _ r e p o r t ( s e c t o r ,  w e b _ c o n t e x t ) :
    p r o m p t  =  f " S E C T O R ÓÇí  { s e c t o r } \ n \ n D A T O S  W E B ÓÇí \ n { w e b _ c o n t e x t } "
    
    r e s p o n s e  =  m o d e l . g e n e r a t e _ c o n t e n t (
        p r o m p t ,
        s y s t e m _ i n s t r u c t i o n = I N I T I A L _ S Y S T E M _ P R O M P T ,
        g e n e r a t i o n _ c o n f i g = { " r e s p o n s e _ m i m e _ t y p e " :  " a p p l i c a t i o n / j s o n " }
    )
    r e t u r n  j s o n . l o a d s ( r e s p o n s e . t e x t )
P a s o  3 :  F u n c i √≥ n  d e  A c t u a l i z a c i √≥ n  ( C h a t )
Py thon
d e f  h a n d l e _ u s e r _ e d i t ( c u r r e n t _ j s o n ,  s e c t i o n _ k e y ,  u s e r _ i n s t r u c t i o n ) :
    #  1 .  R e c u p e r a r  c o n t e n i d o  a c t u a l
    o l d _ t e x t  =  c u r r e n t _ j s o n [ ' s e c t i o n s ' ] [ s e c t i o n _ k e y ] [ ' c o n t e n t ' ]
    
    #  2 .  R e - g e n e r a r  s o l o  e s a  s e c c i √≥ n
    p r o m p t  =  f " " "
    T A R E A ÓÇí  A c t u a l i z a r  s e c c i √≥ n  ' { s e c t i o n _ k e y } ' .
    T E X T O  O R I G I N A L ÓÇí  { o l d _ t e x t }
    C A M B I O  S O L I C I T A D O ÓÇí  { u s e r _ i n s t r u c t i o n }
    
    D e v u e l v e  s o l o  e l  n u e v o  M a r k d o w n .
    " " "
    
    n e w _ t e x t  =  m o d e l . g e n e r a t e _ c o n t e n t ( p r o m p t ) . t e x t
    
    #  3 .  A c t u a l i z a r  e s t a d o
    c u r r e n t _ j s o n [ ' s e c t i o n s ' ] [ s e c t i o n _ k e y ] [ ' c o n t e n t ' ]  =  n e w _ t e x t
    r e t u r n  c u r r e n t _ j s o n
1 1 .  E N T R E G A B L E S  Y  R O A D M A P
F a s e  1 :  B a c k e n d  C o r e  ( D √≠ a  1 - 2 )
Implement ar a n a l y s t . p y  con la l√≥gic a de Gemini ÓÇù T a vil y .
SEARCH OS ÓÇÅT ool 1ÓÇÇ
11

=== P√°gina 12 ===
V alidar que el JSON de salida r espet a la estructura.
F a s e  2 :  U I  S k e l e t o n  ( D √≠ a  3 )
Mont ar Str e amlit con dos columnas.
Columna Iz quier da: Input simple.
Columna Der echa: s t . m a r k d o w n ( )  it erando sobr e el JSON.
F a s e  3 :  I n t e r a c t i v i d a d  ( D √≠ a  4 - 5 )
Conect ar el Chat de la iz quier da a la funci√≥n h a n d l e _ u s e r _ e d i t .
Implement ar el r efr esco de est ado ( s t . s e s s i o n _ s t a t e ) p ara que la der echa se  
actualice al inst ant e.
F a s e  4 :  R e f i n a m i e n t o  ( D √≠ a  6 )
Ajust ar la t emperatura del modelo ÓÇÅ0 .2 r ecomendado ).
Mejorar los Syst em Pr ompt s  con ejemplos de "De al K illers" r e ales.
SEARCH OS ÓÇÅT ool 1ÓÇÇ
12
